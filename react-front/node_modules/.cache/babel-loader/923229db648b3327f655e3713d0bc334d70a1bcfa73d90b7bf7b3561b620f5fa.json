{"ast":null,"code":"import{createContext,useContext,useState,useEffect}from'react';import{verifyTokenRequest}from'../AuthP/auth';// Ajusta la ruta según tu estructura de carpetas\nimport Cookies from'js-cookie';import{jsx as _jsx}from\"react/jsx-runtime\";const AdminContext=/*#__PURE__*/createContext();export const useAdmin=()=>{const context=useContext(AdminContext);if(!context){throw new Error('useAdmin debe ser usado dentro de un AdminProvider');}return context;};export const AdminProvider=_ref=>{let{children}=_ref;const[esAdmin,setEsAdmin]=useState(false);const[cargando,setCargando]=useState(true);useEffect(()=>{const verificarAdmin=async()=>{const token=localStorage.getItem('token');// Cambia esto si prefieres usar Cookies\nif(token){try{const respuesta=await verifyTokenRequest(token);console.log('Respuesta de verificación:',respuesta.data);setEsAdmin(respuesta.data.role==='admin');}catch(error){console.error('Error al verificar el estado de administrador:',error);setEsAdmin(false);}}else{setEsAdmin(false);}setCargando(false);};verificarAdmin();},[]);const value={esAdmin,cargando,setEsAdmin};return/*#__PURE__*/_jsx(AdminContext.Provider,{value:value,children:cargando?/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}):children});};","map":{"version":3,"names":["createContext","useContext","useState","useEffect","verifyTokenRequest","Cookies","jsx","_jsx","AdminContext","useAdmin","context","Error","AdminProvider","_ref","children","esAdmin","setEsAdmin","cargando","setCargando","verificarAdmin","token","localStorage","getItem","respuesta","console","log","data","role","error","value","Provider"],"sources":["C:/Users/Afthercaft/Pictures/ApiReact/react-front/src/context/adminContext.jsx"],"sourcesContent":["import { createContext, useContext, useState, useEffect } from 'react';\r\nimport { verifyTokenRequest } from '../AuthP/auth'; // Ajusta la ruta según tu estructura de carpetas\r\nimport Cookies from 'js-cookie';\r\n\r\nconst AdminContext = createContext();\r\n\r\nexport const useAdmin = () => {\r\n  const context = useContext(AdminContext);\r\n  if (!context) {\r\n    throw new Error('useAdmin debe ser usado dentro de un AdminProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const AdminProvider = ({ children }) => {\r\n  const [esAdmin, setEsAdmin] = useState(false);\r\n  const [cargando, setCargando] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const verificarAdmin = async () => {\r\n      const token = localStorage.getItem('token'); // Cambia esto si prefieres usar Cookies\r\n      if (token) {\r\n        try {\r\n          const respuesta = await verifyTokenRequest(token);\r\n          console.log('Respuesta de verificación:', respuesta.data);\r\n          setEsAdmin(respuesta.data.role === 'admin');\r\n        } catch (error) {\r\n          console.error('Error al verificar el estado de administrador:', error);\r\n          setEsAdmin(false);\r\n        }\r\n      } else {\r\n        setEsAdmin(false);\r\n      }\r\n      setCargando(false);\r\n    };\r\n  \r\n    verificarAdmin();\r\n  }, []);\r\n\r\n  const value = { esAdmin, cargando, setEsAdmin };\r\n\r\n  return (\r\n    <AdminContext.Provider value={value}>\r\n      {cargando ? <div>Loading...</div> : children}\r\n    </AdminContext.Provider>\r\n  );\r\n};\r\n"],"mappings":"AAAA,OAASA,aAAa,CAAEC,UAAU,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CACtE,OAASC,kBAAkB,KAAQ,eAAe,CAAE;AACpD,MAAO,CAAAC,OAAO,KAAM,WAAW,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEhC,KAAM,CAAAC,YAAY,cAAGR,aAAa,CAAC,CAAC,CAEpC,MAAO,MAAM,CAAAS,QAAQ,CAAGA,CAAA,GAAM,CAC5B,KAAM,CAAAC,OAAO,CAAGT,UAAU,CAACO,YAAY,CAAC,CACxC,GAAI,CAACE,OAAO,CAAE,CACZ,KAAM,IAAI,CAAAC,KAAK,CAAC,oDAAoD,CAAC,CACvE,CACA,MAAO,CAAAD,OAAO,CAChB,CAAC,CAED,MAAO,MAAM,CAAAE,aAAa,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACxC,KAAM,CAACE,OAAO,CAAEC,UAAU,CAAC,CAAGd,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAACe,QAAQ,CAAEC,WAAW,CAAC,CAAGhB,QAAQ,CAAC,IAAI,CAAC,CAE9CC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAgB,cAAc,CAAG,KAAAA,CAAA,GAAY,CACjC,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAE;AAC7C,GAAIF,KAAK,CAAE,CACT,GAAI,CACF,KAAM,CAAAG,SAAS,CAAG,KAAM,CAAAnB,kBAAkB,CAACgB,KAAK,CAAC,CACjDI,OAAO,CAACC,GAAG,CAAC,4BAA4B,CAAEF,SAAS,CAACG,IAAI,CAAC,CACzDV,UAAU,CAACO,SAAS,CAACG,IAAI,CAACC,IAAI,GAAK,OAAO,CAAC,CAC7C,CAAE,MAAOC,KAAK,CAAE,CACdJ,OAAO,CAACI,KAAK,CAAC,gDAAgD,CAAEA,KAAK,CAAC,CACtEZ,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,IAAM,CACLA,UAAU,CAAC,KAAK,CAAC,CACnB,CACAE,WAAW,CAAC,KAAK,CAAC,CACpB,CAAC,CAEDC,cAAc,CAAC,CAAC,CAClB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAU,KAAK,CAAG,CAAEd,OAAO,CAAEE,QAAQ,CAAED,UAAW,CAAC,CAE/C,mBACET,IAAA,CAACC,YAAY,CAACsB,QAAQ,EAACD,KAAK,CAAEA,KAAM,CAAAf,QAAA,CACjCG,QAAQ,cAAGV,IAAA,QAAAO,QAAA,CAAK,YAAU,CAAK,CAAC,CAAGA,QAAQ,CACvB,CAAC,CAE5B,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}